<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prompt Vault | Professional AI Prompt Management</title>
    <meta name="description" content="A professional platform for managing, organizing, and analyzing AI prompts with advanced features.">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>ðŸ’¾</text></svg>">
    <style>
        /* Additional styles for image upload */
        .image-upload-card {
            position: relative;
            background: var(--bg-tertiary);
            border: 2px dashed var(--border-color);
            border-radius: var(--border-radius);
            height: 150px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all var(--transition-fast);
            overflow: hidden;
        }

        .image-upload-card:hover {
            border-color: var(--primary-500);
            background: var(--primary-50);
        }

        .image-upload-card.has-image {
            border: 2px solid var(--success-500);
        }

        .image-upload-card.add-more-btn {
            background: var(--bg-secondary);
            border-style: dashed;
        }

        .image-upload-card.add-more-btn:hover {
            background: var(--primary-50);
            border-color: var(--primary-500);
        }

        .image-upload-placeholder {
            text-align: center;
            color: var(--text-tertiary);
            z-index: 1;
            pointer-events: none;
        }

        .image-upload-placeholder i {
            font-size: 2rem;
            margin-bottom: 0.5rem;
            display: block;
        }

        .image-upload-placeholder span {
            display: block;
            font-weight: 500;
            margin-bottom: 0.25rem;
        }

        .image-upload-placeholder small {
            font-size: 0.75rem;
            opacity: 0.8;
        }

        .image-upload-card input[type="file"] {
            position: absolute;
            inset: 0;
            opacity: 0;
            cursor: pointer;
            z-index: 2;
        }

        .image-preview-container {
            position: absolute;
            inset: 0;
            width: 100%;
            height: 100%;
            display: none;
        }

        .image-preview-container img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            border-radius: var(--border-radius);
        }

        .image-upload-card .remove-image {
            position: absolute;
            top: 0.5rem;
            right: 0.5rem;
            width: 24px;
            height: 24px;
            background: var(--danger-500);
            color: white;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 3;
            font-size: 1rem;
            line-height: 1;
            display: none;
        }

        .image-upload-card .remove-image:hover {
            background: var(--danger-600);
            transform: scale(1.1);
        }

        .images-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 1rem;
            margin-top: 1rem;
        }

        /* Scrollable modal body */
        .modal-body {
            max-height: 70vh;
            overflow-y: auto;
            padding-right: 0.5rem;
        }

        .modal-body::-webkit-scrollbar {
            width: 6px;
        }

        .modal-body::-webkit-scrollbar-track {
            background: var(--bg-secondary);
            border-radius: 3px;
        }

        .modal-body::-webkit-scrollbar-thumb {
            background: var(--border-color);
            border-radius: 3px;
        }

        .modal-body::-webkit-scrollbar-thumb:hover {
            background: var(--text-tertiary);
        }

        /* Prompt details styles */
        .prompt-details {
            padding: 1rem;
        }

        .details-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 1.5rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid var(--border-color);
        }

        .details-header h3 {
            margin: 0;
            flex: 1;
        }

        .details-content {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }

        .section {
            background: var(--bg-secondary);
            padding: 1.25rem;
            border-radius: var(--border-radius);
            border: 1px solid var(--border-color);
        }

        .section h4 {
            margin: 0 0 1rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .content-box, .notes-box {
            background: var(--bg-primary);
            padding: 1rem;
            border-radius: var(--border-radius-sm);
            border: 1px solid var(--border-color);
            white-space: pre-wrap;
            line-height: 1.6;
        }

        .details-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 1rem;
            padding: 1rem;
            background: var(--bg-tertiary);
            border-radius: var(--border-radius);
        }

        .stat-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.5rem;
        }

        .stat-label {
            color: var(--text-tertiary);
            font-weight: 500;
        }

        .stat-value {
            font-weight: 600;
            color: var(--text-primary);
        }

        .tags-list {
            display: flex;
            flex-wrap: wrap;
            gap: 0.5rem;
        }

        .details-meta {
            display: flex;
            gap: 2rem;
            padding-top: 1rem;
            border-top: 1px solid var(--border-color);
            color: var(--text-tertiary);
            font-size: 0.875rem;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        /* Empty state in prompts container */
        .prompts-container .empty-state {
            grid-column: 1 / -1;
            text-align: center;
            padding: 4rem 2rem;
        }

        .empty-illustration {
            font-size: 4rem;
            color: var(--text-tertiary);
            margin-bottom: 1.5rem;
            opacity: 0.5;
        }

        .empty-state h3 {
            font-size: 1.5rem;
            margin-bottom: 0.5rem;
            color: var(--text-primary);
        }

        .empty-state p {
            color: var(--text-tertiary);
            margin-bottom: 2rem;
            max-width: 400px;
            margin-left: auto;
            margin-right: auto;
        }

        .empty-actions {
            display: flex;
            gap: 1rem;
            justify-content: center;
        }

        /* Category badges */
        .category-badge {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
            white-space: nowrap;
        }

        /* Pagination ellipsis */
        .page-ellipsis {
            display: flex;
            align-items: center;
            justify-content: center;
            min-width: 36px;
            color: var(--text-tertiary);
        }

        /* Tags input */
        .tag-input {
            display: inline-flex;
            align-items: center;
            gap: 0.375rem;
            padding: 0.375rem 0.75rem;
            background: var(--primary-50);
            color: var(--primary-700);
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 500;
        }

        .tag-input .remove-tag {
            background: none;
            border: none;
            color: inherit;
            cursor: pointer;
            padding: 0;
            font-size: 1rem;
            line-height: 1;
            opacity: 0.7;
        }

        .tag-input .remove-tag:hover {
            opacity: 1;
        }

        /* Rating stars */
        #ratingStars .star {
            font-size: 1.25rem;
            color: var(--gray-300);
            cursor: pointer;
            transition: color var(--transition-fast);
        }

        #ratingStars .star.active,
        #ratingStars .star:hover {
            color: var(--warning-500);
        }

        .help-text {
            font-size: 0.875rem;
            color: var(--text-tertiary);
            margin-top: 0.25rem;
            margin-bottom: 0.5rem;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header Section -->
        <header class="header">
            <div class="logo-container">
                <h1><i class="fas fa-brain"></i> Prompt Vault</h1>
                <p class="tagline">Professional AI Prompt Management Platform</p>
                <div class="version-badge">v2.1</div>
            </div>
            
            <div class="header-controls">
                <div class="control-group">
                    <button id="templatesBtn" class="btn btn-outline" title="Manage templates">
                        <i class="fas fa-layer-group"></i> Templates
                    </button>
                    <button id="statsBtn" class="btn btn-outline" title="View analytics">
                        <i class="fas fa-chart-line"></i> Analytics
                    </button>
                </div>
                
                <div class="control-group">
                    <button id="importBtn" class="btn btn-outline">
                        <i class="fas fa-file-import"></i> Import
                    </button>
                    <button id="exportBtn" class="btn btn-outline">
                        <i class="fas fa-file-export"></i> Export
                    </button>
                </div>
                
                <div class="theme-control">
                    <button id="themeToggle" class="btn-icon" title="Toggle theme">
                        <i class="fas fa-moon"></i>
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content Area -->
        <main class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <div class="sidebar-header">
                    <h3><i class="fas fa-sliders-h"></i> Filters & Categories</h3>
                </div>
                
                <div class="sidebar-section">
                    <h4><i class="fas fa-filter"></i> Quick Filters</h4>
                    <div class="filter-buttons">
                        <button class="filter-btn active" data-filter="all">
                            <i class="fas fa-th-large"></i> All Prompts
                            <span class="filter-count" id="countAll">0</span>
                        </button>
                        <button class="filter-btn" data-filter="favorites">
                            <i class="fas fa-heart"></i> Favorites
                            <span class="filter-count" id="countFavorites">0</span>
                        </button>
                        <button class="filter-btn" data-filter="recent">
                            <i class="fas fa-clock"></i> Recent
                            <span class="filter-count" id="countRecent">0</span>
                        </button>
                        <button class="filter-btn" data-filter="withImages">
                            <i class="fas fa-image"></i> With Images
                            <span class="filter-count" id="countImages">0</span>
                        </button>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <div class="section-header">
                        <h4><i class="fas fa-folder-tree"></i> Categories</h4>
                        <button id="addCategoryBtn" class="btn-icon small" title="Add category">
                            <i class="fas fa-plus"></i>
                        </button>
                    </div>
                    
                    <div class="categories-container">
                        <div id="categoriesList" class="categories-list">
                            <!-- Categories will be populated here -->
                        </div>
                        
                        <div class="add-category-form" id="addCategoryForm" style="display: none;">
                            <input type="text" id="newCategoryName" placeholder="Category name">
                            <div class="form-actions">
                                <button id="cancelCategoryBtn" class="btn-text">Cancel</button>
                                <button id="saveCategoryBtn" class="btn-text primary">Add</button>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h4><i class="fas fa-chart-pie"></i> Library Stats</h4>
                    <div class="stats-mini">
                        <div class="stat-item">
                            <span class="stat-label">Total:</span>
                            <span id="totalPrompts" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Favorites:</span>
                            <span id="totalFavorites" class="stat-value">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Categories:</span>
                            <span id="totalCategories" class="stat-value">7</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Today:</span>
                            <span id="promptsToday" class="stat-value">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="sidebar-section">
                    <h4><i class="fas fa-bolt"></i> Quick Actions</h4>
                    <div class="quick-actions">
                        <button id="bulkEditBtn" class="action-link">
                            <i class="fas fa-edit"></i> Bulk Edit
                        </button>
                        <button id="findDuplicatesBtn" class="action-link">
                            <i class="fas fa-copy"></i> Find Duplicates
                        </button>
                        <button id="clearCacheBtn" class="action-link">
                            <i class="fas fa-broom"></i> Clear Cache
                        </button>
                        <button id="backupBtn" class="action-link">
                            <i class="fas fa-save"></i> Backup Now
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <section class="main-panel">
                <!-- Top Bar -->
                <div class="top-bar">
                    <div class="search-container">
                        <div class="search-input-wrapper">
                            <i class="fas fa-search"></i>
                            <input type="text" id="searchInput" placeholder="Search prompts, tags, or content...">
                            <div class="search-actions">
                                <button id="clearSearchBtn" class="btn-icon small" title="Clear search">
                                    <i class="fas fa-times"></i>
                                </button>
                            </div>
                        </div>
                        <div id="searchSuggestions" class="search-suggestions"></div>
                    </div>
                    
                    <div class="top-bar-actions">
                        <div class="view-controls">
                            <button id="gridViewBtn" class="view-btn active" title="Grid view">
                                <i class="fas fa-th-large"></i>
                            </button>
                            <button id="listViewBtn" class="view-btn" title="List view">
                                <i class="fas fa-list"></i>
                            </button>
                            <button id="compactViewBtn" class="view-btn" title="Compact view">
                                <i class="fas fa-grip-horizontal"></i>
                            </button>
                        </div>
                        
                        <div class="sort-controls">
                            <select id="sortSelect" class="sort-select">
                                <option value="newest">Newest First</option>
                                <option value="oldest">Oldest First</option>
                                <option value="title">Title A-Z</option>
                                <option value="rating">Highest Rated</option>
                                <option value="complexity">Most Complex</option>
                            </select>
                        </div>
                        
                        <button id="addPromptBtn" class="btn btn-primary">
                            <i class="fas fa-plus-circle"></i> New Prompt
                        </button>
                    </div>
                </div>
                
                <!-- Content Area -->
                <div class="content-area">
                    <!-- Stats Bar -->
                    <div class="stats-bar">
                        <div class="stats-bar-item">
                            <span class="stats-label">Showing:</span>
                            <span id="showingCount" class="stats-value">0</span>
                            <span class="stats-label">of</span>
                            <span id="totalCount" class="stats-value">0</span>
                        </div>
                        <div class="stats-bar-item">
                            <span class="stats-label">Words:</span>
                            <span id="totalWords" class="stats-value">0</span>
                        </div>
                        <div class="stats-bar-item">
                            <span class="stats-label">Tokens:</span>
                            <span id="totalTokens" class="stats-value">0</span>
                        </div>
                        <div class="stats-bar-item">
                            <button id="selectAllBtn" class="btn-text small">Select All</button>
                            <button id="bulkDeleteBtn" class="btn-text small danger" style="display: none;">
                                <i class="fas fa-trash"></i> Delete Selected
                            </button>
                        </div>
                    </div>
                    
                    <!-- Prompts Grid/List -->
                    <div id="promptsContainer" class="prompts-container grid-view">
                        <div class="empty-state" id="emptyState">
                            <div class="empty-illustration">
                                <i class="fas fa-comment-alt"></i>
                            </div>
                            <h3>Your Prompt Library is Empty</h3>
                            <p>Start by adding your first AI prompt to build your collection</p>
                            <div class="empty-actions">
                                <button id="addFirstPromptBtn" class="btn btn-primary">
                                    <i class="fas fa-plus-circle"></i> Create First Prompt
                                </button>
                                <button id="importSampleBtn" class="btn btn-outline">
                                    <i class="fas fa-magic"></i> Load Sample Data
                                </button>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pagination -->
                    <div class="pagination" id="pagination" style="display: none;">
                        <button class="pagination-btn" id="prevPageBtn" disabled>
                            <i class="fas fa-chevron-left"></i> Previous
                        </button>
                        <div class="page-numbers" id="pageNumbers"></div>
                        <button class="pagination-btn" id="nextPageBtn">
                            Next <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Add/Edit Prompt Modal -->
    <div id="promptModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="modalTitle">Create New Prompt</h2>
                <div class="modal-actions">
                    <button class="btn-icon" id="saveAsTemplateBtn" title="Save as template">
                        <i class="fas fa-save"></i>
                    </button>
                    <button class="close-modal">&times;</button>
                </div>
            </div>
            <form id="promptForm">
                <div class="modal-body">
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="promptTitle">
                                <i class="fas fa-heading"></i> Prompt Title *
                            </label>
                            <input type="text" id="promptTitle" required 
                                   placeholder="Enter a clear, descriptive title">
                        </div>
                        
                        <div class="form-group">
                            <label for="promptCategory">
                                <i class="fas fa-folder"></i> Category *
                            </label>
                            <select id="promptCategory" required>
                                <option value="">Select category</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="promptTags">
                                <i class="fas fa-tags"></i> Tags
                            </label>
                            <div class="tags-input-container">
                                <input type="text" id="promptTags" 
                                       placeholder="Type and press Enter to add tags">
                                <div class="tags-suggestions" id="tagsSuggestions"></div>
                            </div>
                            <div class="tags-container" id="tagsContainer"></div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <div class="section-header">
                            <label for="promptText">
                                <i class="fas fa-comment-dots"></i> Prompt Content *
                            </label>
                            <div class="char-counter">
                                <span id="charCount">0</span> characters
                                <span id="wordCount">0</span> words
                                <span id="tokenCount">0</span> tokens
                            </div>
                        </div>
                        <textarea id="promptText" rows="8" required 
                                  placeholder="Enter your AI prompt here..."></textarea>
                    </div>
                    
                    <div class="form-grid">
                        <div class="form-group">
                            <label for="promptNotes">
                                <i class="fas fa-sticky-note"></i> Notes & Parameters
                            </label>
                            <textarea id="promptNotes" rows="3" 
                                      placeholder="Add usage notes, parameters, or tips..."></textarea>
                        </div>
                        
                        <div class="form-group">
                            <label><i class="fas fa-star"></i> Effectiveness Rating</label>
                            <div class="rating-input">
                                <div class="stars" id="ratingStars">
                                    <span class="star" data-value="1"><i class="far fa-star"></i></span>
                                    <span class="star" data-value="2"><i class="far fa-star"></i></span>
                                    <span class="star" data-value="3"><i class="far fa-star"></i></span>
                                    <span class="star" data-value="4"><i class="far fa-star"></i></span>
                                    <span class="star" data-value="5"><i class="far fa-star"></i></span>
                                </div>
                                <input type="hidden" id="promptRating" value="0">
                                <div class="rating-label" id="ratingLabel">Not rated</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="form-section">
                        <div class="section-header">
                            <h4><i class="fas fa-images"></i> Reference Images</h4>
                            <div class="section-actions">
                                <button type="button" class="btn-text" id="addImageUrlBtn">
                                    <i class="fas fa-link"></i> Add from URL
                                </button>
                            </div>
                        </div>
                    
                        <p class="help-text">Add reference images to show input examples or expected output results</p>
                    
                        <!-- Input Images Section -->
                        <div class="images-subsection">
                            <h5><i class="fas fa-upload" style="color: var(--warning-500);"></i> Input Reference Images</h5>
                            <p class="help-text">Upload example input images that would be used with this prompt</p>
                            <div class="images-grid" id="inputImagesGrid">
                                <!-- Input Reference Images (will be added dynamically) -->
                                <div class="image-upload-card" data-type="input" data-index="0">
                                    <div class="image-upload-placeholder">
                                        <i class="fas fa-upload"></i>
                                        <span>Input 1</span>
                                        <small>Example input image</small>
                                    </div>
                                    <input type="file" class="image-input" accept="image/*" data-type="input" data-index="0">
                                    <div class="image-preview-container"></div>
                                    <button type="button" class="remove-image">Ã—</button>
                                </div>
                    
                                <!-- Add more input images button -->
                                <div class="image-upload-card add-more-btn" id="addInputImageBtn">
                                    <div class="image-upload-placeholder">
                                        <i class="fas fa-plus"></i>
                                        <span>Add Input Image</span>
                                        <small>Add another input example</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    
                        <!-- Result Images Section -->
                        <div class="images-subsection">
                            <h5><i class="fas fa-image" style="color: var(--success-500);"></i> Result Reference Images</h5>
                            <p class="help-text">Upload example output images that this prompt would generate</p>
                            <div class="images-grid" id="resultImagesGrid">
                                <!-- Result Images (will be added dynamically) -->
                                <div class="image-upload-card" data-type="result" data-index="0">
                                    <div class="image-upload-placeholder">
                                        <i class="fas fa-image"></i>
                                        <span>Result 1</span>
                                        <small>Example output image</small>
                                    </div>
                                    <input type="file" class="image-input" accept="image/*" data-type="result" data-index="0">
                                    <div class="image-preview-container"></div>
                                    <button type="button" class="remove-image">Ã—</button>
                                </div>
                    
                                <!-- Add more result images button -->
                                <div class="image-upload-card add-more-btn" id="addResultImageBtn">
                                    <div class="image-upload-placeholder">
                                        <i class="fas fa-plus"></i>
                                        <span>Add Result Image</span>
                                        <small>Add another output example</small>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="advanced-section" id="advancedSection">
                        <div class="section-header toggle-header" id="toggleAdvanced">
                            <h4><i class="fas fa-cogs"></i> Advanced Settings</h4>
                            <i class="fas fa-chevron-down"></i>
                        </div>
                        <div class="advanced-content" id="advancedContent" style="display: none;">
                            <div class="form-grid">
                                <div class="form-group">
                                    <label for="promptEngine">
                                        <i class="fas fa-robot"></i> AI Engine
                                    </label>
                                    <select id="promptEngine">
                                        <option value="">Any Engine</option>
                                        <option value="chatgpt">ChatGPT</option>
                                        <option value="dalle">DALL-E</option>
                                        <option value="midjourney">Midjourney</option>
                                        <option value="stable">Stable Diffusion</option>
                                        <option value="claude">Claude</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="promptComplexity">
                                        <i class="fas fa-chart-line"></i> Complexity Level
                                    </label>
                                    <select id="promptComplexity">
                                        <option value="1">Simple</option>
                                        <option value="2">Basic</option>
                                        <option value="3" selected>Moderate</option>
                                        <option value="4">Complex</option>
                                        <option value="5">Advanced</option>
                                    </select>
                                </div>
                                
                                <div class="form-group">
                                    <label for="promptUsageCount">
                                        <i class="fas fa-fire"></i> Usage Count
                                    </label>
                                    <input type="number" id="promptUsageCount" min="0" value="0">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="modal-footer">
                    <div class="footer-actions">
                        <button type="button" class="btn btn-outline close-modal">Cancel</button>
                        <button type="button" class="btn btn-outline" id="resetFormBtn">Reset</button>
                        <button type="submit" class="btn btn-primary" id="savePromptBtn">
                            <i class="fas fa-save"></i> Save Prompt
                        </button>
                    </div>
                    <input type="hidden" id="promptId">
                </div>
            </form>
        </div>
    </div>

    <!-- Image URL Modal -->
    <div id="imageUrlModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3>Add Image from URL</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="imageUrlInput">Image URL</label>
                    <input type="url" id="imageUrlInput" placeholder="https://example.com/image.jpg">
                </div>
                <div class="form-group">
                    <label for="imageTypeSelect">Image Type</label>
                    <select id="imageTypeSelect">
                        <option value="input">Input Reference</option>
                        <option value="result">Result Example</option>
                    </select>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-outline close-modal">Cancel</button>
                <button class="btn btn-primary" id="loadImageUrlBtn">Load Image</button>
            </div>
        </div>
    </div>

    <!-- Image Preview Modal -->
    <div id="imagePreviewModal" class="modal">
        <div class="modal-content modal-full">
            <div class="modal-header">
                <h3 id="imagePreviewTitle">Image Preview</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="image-preview-container">
                    <img id="previewImage" src="" alt="Preview">
                </div>
            </div>
        </div>
    </div>

    <!-- Prompt Details Modal -->
    <div id="promptDetailsModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2 id="detailsTitle">Prompt Details</h2>
                <div class="modal-actions">
                    <button class="btn-icon" id="editDetailsBtn" title="Edit prompt">
                        <i class="fas fa-edit"></i>
                    </button>
                    <button class="btn-icon" id="shareDetailsBtn" title="Share prompt">
                        <i class="fas fa-share"></i>
                    </button>
                    <button class="close-modal">&times;</button>
                </div>
            </div>
            <div class="modal-body" id="detailsContent">
                <!-- Content will be populated dynamically -->
            </div>
        </div>
    </div>

    <!-- Analytics Modal -->
    <div id="analyticsModal" class="modal">
        <div class="modal-content modal-xl">
            <div class="modal-header">
                <h2>Prompt Library Analytics</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="analytics-grid">
                    <!-- Analytics will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Templates Modal -->
    <div id="templatesModal" class="modal">
        <div class="modal-content modal-lg">
            <div class="modal-header">
                <h2>Prompt Templates</h2>
                <button class="close-modal">&times;</button>
            </div>
            <div class="modal-body">
                <div class="templates-container" id="templatesContainer">
                    <!-- Templates will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirmModal" class="modal">
        <div class="modal-content modal-sm">
            <div class="modal-header">
                <h3 id="confirmTitle">Confirm Action</h3>
            </div>
            <div class="modal-body">
                <p id="confirmMessage">Are you sure you want to perform this action?</p>
            </div>
            <div class="modal-footer">
                <button id="confirmCancel" class="btn btn-outline">Cancel</button>
                <button id="confirmOk" class="btn btn-danger">Confirm</button>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <div class="toast-icon">
                <i class="fas fa-check-circle"></i>
            </div>
            <div class="toast-body">
                <div class="toast-title" id="toastTitle">Success</div>
                <div class="toast-message" id="toastMessage">Operation completed successfully</div>
            </div>
            <button class="toast-close">&times;</button>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="loading-content">
            <div class="loading-spinner"></div>
            <div class="loading-text">Loading...</div>
        </div>
    </div>

    <!-- Floating Action Button -->
    <button id="fabButton" class="fab-button" title="Create new prompt (Ctrl+N)">
        <i class="fas fa-plus"></i>
    </button>

    <!-- Import File Input -->
    <input type="file" id="importFile" accept=".json,.txt" style="display: none;">

    <script src="script.js"></script>
    <script>
        // Initialize additional event listeners
        document.addEventListener('DOMContentLoaded', function() {
            // Setup rating stars
            const stars = document.querySelectorAll('#ratingStars .star');
            stars.forEach(star => {
                star.addEventListener('click', function() {
                    const rating = parseInt(this.dataset.value);
                    document.getElementById('promptRating').value = rating;
                    
                    // Update stars display
                    stars.forEach((s, index) => {
                        if (index < rating) {
                            s.classList.add('active');
                            s.innerHTML = '<i class="fas fa-star"></i>';
                        } else {
                            s.classList.remove('active');
                            s.innerHTML = '<i class="far fa-star"></i>';
                        }
                    });
                    
                    // Update label
                    const label = document.getElementById('ratingLabel');
                    if (label) {
                        label.textContent = rating === 0 ? 'Not rated' : `${rating}/5`;
                    }
                });
                
                star.addEventListener('mouseover', function() {
                    const rating = parseInt(this.dataset.value);
                    stars.forEach((s, index) => {
                        if (index < rating) {
                            s.innerHTML = '<i class="fas fa-star"></i>';
                        } else {
                            s.innerHTML = '<i class="far fa-star"></i>';
                        }
                    });
                });
                
                star.addEventListener('mouseout', function() {
                    const currentRating = parseInt(document.getElementById('promptRating').value) || 0;
                    stars.forEach((s, index) => {
                        if (index < currentRating) {
                            s.innerHTML = '<i class="fas fa-star"></i>';
                        } else {
                            s.innerHTML = '<i class="far fa-star"></i>';
                        }
                    });
                });
            });
            
            // Setup advanced section toggle
            const toggleHeader = document.getElementById('toggleAdvanced');
            if (toggleHeader) {
                toggleHeader.addEventListener('click', function() {
                    const content = document.getElementById('advancedContent');
                    const icon = this.querySelector('i');
                    
                    if (content.style.display === 'none' || !content.style.display) {
                        content.style.display = 'block';
                        icon.style.transform = 'rotate(180deg)';
                    } else {
                        content.style.display = 'none';
                        icon.style.transform = 'rotate(0deg)';
                    }
                });
            }
            
            // Setup tags input
            const tagsInput = document.getElementById('promptTags');
            if (tagsInput) {
                tagsInput.addEventListener('keydown', function(e) {
                    if (e.key === 'Enter' || e.key === ',') {
                        e.preventDefault();
                        const tag = this.value.trim();
                        if (tag) {
                            addTag(tag);
                            this.value = '';
                        }
                    }
                });
            }
            
            // Setup character count
            const promptText = document.getElementById('promptText');
            if (promptText) {
                promptText.addEventListener('input', function() {
                    const text = this.value;
                    const chars = text.length;
                    const words = text.trim().split(/\s+/).filter(w => w.length > 0).length;
                    const tokens = Math.ceil(chars / 4);
                    
                    document.getElementById('charCount').textContent = chars;
                    document.getElementById('wordCount').textContent = words;
                    document.getElementById('tokenCount').textContent = tokens;
                });
            }
        });
        
        function addTag(tagName) {
            const container = document.getElementById('tagsContainer');
            if (!container) return;
            
            // Check if tag already exists
            const existingTags = Array.from(container.querySelectorAll('.tag-input'))
                .map(el => el.textContent.replace('Ã—', '').trim());
            
            if (existingTags.includes(tagName)) {
                return;
            }
            
            const tagEl = document.createElement('span');
            tagEl.className = 'tag-input';
            tagEl.innerHTML = `
                ${tagName}
                <button class="remove-tag" type="button">&times;</button>
            `;
            
            // Add remove listener
            const removeBtn = tagEl.querySelector('.remove-tag');
            removeBtn.addEventListener('click', function() {
                this.parentElement.remove();
            });
            
            container.appendChild(tagEl);
        }
    </script>
</body>
</html>